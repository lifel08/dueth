<% content_for :head do %>
<title>Public User Profile of Dueth| Dueth.com</title>
<meta name="robots" content="noindex, follow" />
<% end %>

<!-- just a margin if the user is not logged in -->
<% if !user_signed_in? %>
  <div class="margin-for-menu"></div>
<% end %>

<!-- Profile section -->
  <div class="profile-section">
    <div class="profile-picture">
      <%= cl_image_tag @user.photo.key, height: 190, width: 190, radius: 8, crop: :fill, gravity: :face %>
    </div>
    <div class="profile-header">
      <div class="profile-greeting">
        <h1> <%= @user.first_name %></h1>
      </div>
      <div class="membership">
        <p> Member since <%= @user.member_since %> </p>
      </div>
      <ul class="profile-attributes">
        <li><%= image_tag 'svg/rating-grey.svg', class: "rating" %> <%= pluralize(@user.reviews.count, 'review') %></li>
        <li><%= image_tag 'svg/verify.svg', class: "rating" %> identity verified</li>
        <li><%= image_tag 'svg/language.svg', class: "rating" %> <%= @user.language %></li>
      </ul>
  </div>
</div>
  <div class="profile-description">
    <p><%= @user.description %></p>
  </div>

<hr>

<!-- Instrument section -->
<div class="h2-instrument-section-public">
  <h2> <%= @user.first_name %>'s instruments </h2>
</div>
<div class="instrument-section-public">
  <% @user.instruments.each do |instrument| %>
        <%= render "./components/instrument_card_big", instrument: instrument %>
  <% end %>
</div>

<hr>

<!-- Review section -->
<div class="review-section">
  <h2> Reviews</h2>
  <% if @user.reviews.size.positive? %>
    <div class="reviews">
        <% @user.reviews.each do |review|  %>
        <%= cl_image_tag review.user.photo.key, height: 60, width: 60, radius: 8, crop: :fill, gravity: :face %>
        <ul class="review-attributes">
          <li> <strong><%= review.user.first_name %></strong></li>
          <li><%= review.created_at.strftime('%B, %Y') %></li>
        </ul>
    </div>
      <p class="review-content"><%= review.content %></p>
      <% end %>
    <% else %>
    <p class="review-content">No reviews yet.</p>
    <% end %>
</div>

<div class="public-footer">

</div>
